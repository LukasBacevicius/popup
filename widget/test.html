<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop-in-Widget Test Page</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #333;
            border-bottom: 2px solid #007ace;
            padding-bottom: 10px;
        }
        
        .demo-section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: #f9f9f9;
        }
        
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
            margin: 10px 0;
        }
        
        .buttons {
            margin: 20px 0;
        }
        
        .btn {
            background: #007ace;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        
        .btn:hover {
            background: #005a9c;
        }
        
        .widget-controls {
            position: fixed;
            top: 20px;
            left: 20px;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border: 1px solid #ddd;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <div class="widget-controls">
        <h4>Widget Controls</h4>
        <button class="btn" onclick="openWidget()">Open Widget</button>
        <button class="btn" onclick="closeWidget()">Close Widget</button>
        <button class="btn" onclick="destroyWidget()">Destroy Widget</button>
        <button class="btn" onclick="createWidget()">Create Widget</button>
    </div>

    <div class="container">
        <h1>Shop-in-Widget Demo</h1>
        <p>This page demonstrates the embeddable Shopify product widget. The widget appears as a floating button in the bottom-right corner, similar to Intercom's chat widget.</p>
        
        <div class="demo-section">
            <h2>Features</h2>
            <ul>
                <li>‚ú® Intercom-like floating button design</li>
                <li>üé® Light and dark theme support</li>
                <li>üì± Mobile responsive</li>
                <li>üõ°Ô∏è CSS isolation to prevent conflicts</li>
                <li>‚ö° Auto-initialization or manual control</li>
                <li>üéØ Multiple positioning options</li>
            </ul>
        </div>
        
        <div class="demo-section">
            <h2>Usage Example</h2>
            <p>To embed the widget on your website, add this script tag:</p>
            <div class="code-block">
&lt;script src="./dist/widget.js" 
        data-shop-domain="your-shop.myshopify.com"
        data-token="your-storefront-access-token"
        data-product-ids="123,456,789"
        data-position="bottom-right"
        data-theme="light"&gt;&lt;/script&gt;
            </div>
        </div>
        
        <div class="demo-section">
            <h2>Manual Initialization</h2>
            <p>You can also initialize the widget programmatically:</p>
            <div class="code-block">
const widget = Popup({
  shopDomain: 'your-shop.myshopify.com',
  token: 'your-storefront-access-token',
  productIds: ['123', '456', '789'],
  position: 'bottom-right',
  theme: 'light'
});

// Control the widget
widget.open();
widget.close();
widget.destroy();
            </div>
        </div>
        
        <div class="demo-section">
            <h2>Configuration Options</h2>
            <ul>
                <li><strong>shopDomain:</strong> Your Shopify shop domain (e.g., 'mystore.myshopify.com')</li>
                <li><strong>token:</strong> Storefront API access token</li>
                <li><strong>productIds:</strong> Array of product IDs to display</li>
                <li><strong>position:</strong> 'bottom-right', 'bottom-left', 'top-right', or 'top-left'</li>
                <li><strong>theme:</strong> 'light' or 'dark'</li>
                <li><strong>containerId:</strong> Custom container ID (optional)</li>
            </ul>
        </div>
        
        <p><strong>Note:</strong> This is a demo page. To see the widget in action with real products, you'll need to provide valid Shopify store credentials.</p>
    </div>

    <!-- Load the widget script -->
    <script src="./dist/widget.js"></script>
    
    <!-- Demo widget with mock data -->
    <script>
        let currentWidget = null;
        
        function createWidget() {
            if (currentWidget) {
                currentWidget.destroy();
            }
            
            // Create a demo widget with mock data
            // In a real implementation, you would use actual Shopify credentials
            currentWidget = Popup({
                shopDomain: 'demo-shop.myshopify.com', // This won't work without real credentials
                token: 'demo-token', // This won't work without real credentials
                productIds: ['1', '2', '3'], // Demo product IDs
                position: 'bottom-right',
                theme: 'light'
            });
        }
        
        function openWidget() {
            if (currentWidget) {
                currentWidget.open();
            }
        }
        
        function closeWidget() {
            if (currentWidget) {
                currentWidget.close();
            }
        }
        
        function destroyWidget() {
            if (currentWidget) {
                currentWidget.destroy();
                currentWidget = null;
            }
        }
        
        // Initialize the widget when page loads
        document.addEventListener('DOMContentLoaded', function() {
            createWidget();
        });
    </script>
</body>
</html>